<div class="min-h-screen bg-slate-50/50 flex flex-col lg:flex-row" @fadeIn>

  <!-- Sidebar Navigation -->
  <aside class="w-full lg:w-72 bg-white border-b lg:border-b-0 lg:border-r border-slate-200 flex-shrink-0 z-20">
    <div class="p-6 lg:sticky lg:top-0">
      <div class="flex items-center gap-3 mb-8 px-2">
        <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center shadow-lg shadow-primary/20">
          <mat-icon class="text-white">dashboard</mat-icon>
        </div>
        <h1 class="text-xl font-bold text-slate-800 tracking-tight">
          {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TITLE }}
        </h1>
      </div>

      <nav class="flex flex-row lg:flex-col gap-2 overflow-x-auto lg:overflow-x-visible pb-4 lg:pb-0 no-scrollbar">
        <!-- ORDERS -->
        <button (click)="setActiveTab(AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS)"
          class="flex items-center gap-3 px-4 py-3 rounded-2xl text-[15px] font-semibold transition-all duration-300 whitespace-nowrap group relative"
          [ngClass]="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS
            ? 'bg-primary-light/50 text-primary-dark'
            : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'">
          <div *ngIf="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS"
            class="absolute left-0 top-1/4 bottom-1/4 w-1 bg-primary rounded-r-lg hidden lg:block"></div>
          <mat-icon class="group-hover:scale-110 transition-transform">receipt_long</mat-icon>
          <span>{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.LABELS.ORDERS }}</span>
        </button>

        <!-- MENUS -->
        <button (click)="setActiveTab(AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS)"
          class="flex items-center gap-3 px-4 py-3 rounded-2xl text-[15px] font-semibold transition-all duration-300 whitespace-nowrap group relative"
          [ngClass]="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS
            ? 'bg-primary-light/50 text-primary-dark'
            : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'">
          <div *ngIf="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS"
            class="absolute left-0 top-1/4 bottom-1/4 w-1 bg-primary rounded-r-lg hidden lg:block"></div>
          <mat-icon class="group-hover:scale-110 transition-transform">restaurant_menu</mat-icon>
          <span>{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.LABELS.MENUS }}</span>
        </button>

        <!-- USERS -->
        <button *ngIf="admintype === 1"
          (click)="setActiveTab(AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS)"
          class="flex items-center gap-3 px-4 py-3 rounded-2xl text-[15px] font-semibold transition-all duration-300 whitespace-nowrap group relative"
          [ngClass]="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS
            ? 'bg-primary-light/50 text-primary-dark'
            : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'">
          <div *ngIf="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS"
            class="absolute left-0 top-1/4 bottom-1/4 w-1 bg-primary rounded-r-lg hidden lg:block"></div>
          <mat-icon class="group-hover:scale-110 transition-transform">people</mat-icon>
          <span>{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.LABELS.USERS }}</span>
        </button>
      </nav>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-4 lg:p-8 overflow-y-auto">

    <!-- HEADER ACTIONS -->
    <div class="flex flex-col gap-6 mb-8" *ngIf="activeTab !== 'json' && activeTab !== 'export'">

      <!-- Title + Date -->
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <div>
          <h2 class="text-2xl font-bold text-slate-800">
            <ng-container [ngSwitch]="activeTab">
              <span *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS">
                {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TITLE }}
              </span>
              <span *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS">
                {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.MENUS.TITLE }}
              </span>
              <span *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS">
                {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TITLE }}
              </span>
            </ng-container>
          </h2>

          <p *ngIf="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS"
            class="text-sm text-slate-500">
            {{ selectedDate | date:'dd/MM/yyyy' }}
          </p>
        </div>

        <!-- Datepicker -->
        <mat-form-field *ngIf="activeTab !== AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS"
          appearance="outline" class="admin-datepicker-field admin-control">
          <mat-label>Selecciona una data</mat-label>
          <input matInput [matDatepicker]="picker" [value]="selectedDate" readonly (dateChange)="onDateChange($event)"
            (click)="picker.open()">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>

      <!-- ACTIONS -->
      <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 w-full">
        <!-- RIGHT -->
        <div class="flex gap-2 justify-end">
          <!-- LEFT -->
          <select [(ngModel)]="selectedExportFormat" class="admin-control bg-white border border-slate-200 rounded-2xl px-4 text-sm font-semibold text-slate-700
                   focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all">
            <option value="json">JSON</option>
            <option value="csv">CSV</option>
            <option value="xlsx">Excel</option>
          </select>
          <button (click)="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS
              ? exportOrdersData()
              : (activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS
                ? exportMenuData()
                : exportUserData())" class="admin-control flex gap-2 bg-primary hover:bg-primary-dark text-white px-6 rounded-2xl font-bold
                   shadow-lg shadow-primary/20 transition-all active:scale-95">
            <mat-icon>download</mat-icon>
            Exportar
          </button>

          <button *ngIf="activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS
                       || activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS"
            (click)="openImportPopup(activeTab === AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS ? 'menus' : 'usuaris')"
            class="admin-control flex gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 rounded-2xl font-bold
                   shadow-lg shadow-emerald-200 transition-all active:scale-95">
            <mat-icon>upload</mat-icon>
            Importar
          </button>
        </div>
      </div>
    </div>

    <!-- Tab Content -->
    <div [ngSwitch]="activeTab">

      <!-- ORDRES -->
      <div *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.ORDERS" class="space-y-6">
        <!-- Day Navigation -->
        <div class="flex gap-3">
          <button (click)="changeDay(-1)"
            class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            <mat-icon>chevron_left</mat-icon>
            {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.PREVIOUS_DAY }}
          </button>
          <button (click)="changeDay(1)"
            class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.NEXT_DAY }}
            <mat-icon>chevron_right</mat-icon>
          </button>
        </div>

        <!-- Desktop Table -->
        <div class="hidden xl:block bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
          <table class="w-full text-left text-sm border-separate border-spacing-0">
            <thead>
              <tr class="bg-slate-50/50">
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.USER }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.TYPE }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.ALLERGIES }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.FIRST_DISH }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.SECOND_DISH }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.DESSERT }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.STATUS }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.TUPPER }}</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
              <tr *ngFor="let order of orders" class="hover:bg-slate-50/50 transition-colors">
                <td class="px-6 py-4">
                  <div class="flex flex-col">
                    <span class="font-bold text-slate-800">{{ order.userData.name }} {{ order.userData.last_name
                      }}</span>
                    <span class="text-xs text-slate-400">{{ order.userData.email }}</span>
                  </div>
                </td>
                <td class="px-6 py-4">
                  <span class="px-2.5 py-1 rounded-lg text-xs font-bold bg-slate-100 text-slate-600 uppercase">
                    {{ order.orderType.name }}
                  </span>
                </td>
                <td class="px-6 py-4">
                  <span class="text-slate-600" [class.text-red-500]="order.allergies"
                    [class.font-bold]="order.allergies">
                    {{ order.allergies || '—' }}
                  </span>
                </td>
                <td class="px-6 py-4 text-slate-600">{{ order.orderDetail.option1 || '—' }}</td>
                <td class="px-6 py-4 text-slate-600">{{ order.orderDetail.option2 || '—' }}</td>
                <td class="px-6 py-4 text-slate-600">{{ order.orderDetail.option3 || '—' }}</td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full" [ngClass]="{
                        'bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.5)]': order.orderStatus.id === 1,
                        'bg-primary shadow-[0_0_8px_rgba(0,156,166,0.5)]': order.orderStatus.id === 2,
                        'bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.5)]': order.orderStatus.id === 3,
                        'bg-rose-400 shadow-[0_0_8px_rgba(251,113,133,0.5)]': order.orderStatus.id === 4
                      }">
                    </div>
                    <select [(ngModel)]="order.orderStatus.id" (change)="onStatusChange(order)"
                      class="bg-transparent border-none text-xs font-bold text-slate-700 focus:ring-0 cursor-pointer p-0">
                      <option *ngFor="let option of statusOptions" [value]="option.value">
                        {{ option.label }}
                      </option>
                    </select>
                  </div>
                </td>
                <td class="px-6 py-4">
                  <span *ngIf="order.has_tupper === 1" class="flex items-center gap-1 text-emerald-600 font-bold">
                    <mat-icon class="text-sm w-4 h-4">check_circle</mat-icon> Sí
                  </span>
                  <span *ngIf="order.has_tupper !== 1" class="text-slate-300">No</span>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="orders.length === 0" class="p-12 text-center">
            <mat-icon class="text-slate-200 text-5xl w-12 h-12 mb-4">receipt_long</mat-icon>
            <p class="text-slate-400 font-medium">{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.NO_ORDERS
              }}</p>
          </div>
        </div>

        <!-- Mobile/Tablet Cards -->
        <div class="xl:hidden grid grid-cols-1 md:grid-cols-2 gap-4">
          <div *ngFor="let order of orders"
            class="bg-white p-5 rounded-3xl shadow-sm border border-slate-200 space-y-4">
            <div class="flex justify-between items-start">
              <div class="flex flex-col">
                <span class="font-bold text-slate-800 text-lg">{{ order.userData.name }} {{ order.userData.last_name
                  }}</span>
                <span class="text-sm text-slate-400">{{ order.userData.email }}</span>
              </div>
              <span
                class="px-2.5 py-1 rounded-lg text-[10px] font-black bg-slate-100 text-slate-600 uppercase tracking-wider">
                {{ order.orderType.name }}
              </span>
            </div>

            <div class="grid grid-cols-2 gap-4 text-sm">
              <div class="flex flex-col gap-1">
                <span class="text-slate-400 font-bold uppercase text-[10px] tracking-widest">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.ALLERGIES }}</span>
                <span class="text-slate-700" [class.text-red-500]="order.allergies">{{ order.allergies || '—' }}</span>
              </div>
              <div class="flex flex-col gap-1">
                <span class="text-slate-400 font-bold uppercase text-[10px] tracking-widest">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.TUPPER }}</span>
                <span class="text-slate-700 font-bold" [class.text-emerald-600]="order.has_tupper === 1">
                  {{ order.has_tupper === 1 ? 'Sí' : 'No' }}
                </span>
              </div>
            </div>

            <div class="bg-slate-50 rounded-2xl p-4 space-y-2">
              <div class="flex justify-between text-sm">
                <span class="text-slate-400">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.FIRST_DISH }}</span>
                <span class="text-slate-700 font-semibold text-right">{{ order.orderDetail.option1 || '—' }}</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-slate-400">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.SECOND_DISH }}</span>
                <span class="text-slate-700 font-semibold text-right">{{ order.orderDetail.option2 || '—' }}</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-slate-400">{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.TABLE.DESSERT
                  }}</span>
                <span class="text-slate-700 font-semibold text-right">{{ order.orderDetail.option3 || '—' }}</span>
              </div>
            </div>

            <div class="pt-2">
              <select [(ngModel)]="order.orderStatus.id" (change)="onStatusChange(order)"
                class="w-full bg-slate-100 border-none rounded-xl px-4 py-2.5 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-primary/20">
                <option *ngFor="let option of statusOptions" [value]="option.value">
                  {{ option.label }}
                </option>
              </select>
            </div>
          </div>
          <div *ngIf="orders.length === 0"
            class="col-span-full p-12 text-center bg-white rounded-3xl border border-dashed border-slate-200">
            <p class="text-slate-400 font-medium">{{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.ORDERS.NO_ORDERS
              }}</p>
          </div>
        </div>
      </div>

      <!-- MENUS -->
      <div *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.MENUS" class="space-y-6">
        <!-- Week Navigation -->
        <div class="flex gap-3">
          <button (click)="changeWeek(-1)"
            class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            <mat-icon>chevron_left</mat-icon>
            {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.MENUS.PREVIOUS_WEEK }}
          </button>
          <button (click)="changeWeek(1)"
            class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-600 hover:bg-slate-50 transition-all shadow-sm">
            {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.MENUS.NEXT_WEEK }}
            <mat-icon>chevron_right</mat-icon>
          </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
          <div *ngFor="let date of weeklyMenus"
            class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex flex-col">
            <div class="bg-slate-50 px-5 py-4 border-b border-slate-100">
              <span class="text-sm font-black text-slate-400 uppercase tracking-widest">{{ date.date | date:'dd/MM'
                }}</span>
              <h3 class="text-lg font-bold text-slate-800">{{ date.date | date:'dd/MM/yyyy' }}</h3>
            </div>

            <div class="p-5 flex-1 space-y-4">
              <ng-container *ngIf="date.menus && date.menus.length > 0; else noMenus">
                <div *ngFor="let menu of date.menus" class="space-y-2">
                  <span class="text-[10px] font-black text-primary uppercase tracking-wider">{{ menu.type }}</span>
                  <div class="flex flex-wrap gap-1.5">
                    <span *ngFor="let option of menu.options"
                      class="px-2.5 py-1 rounded-lg text-xs font-bold bg-primary-light text-primary-dark border border-primary-light">
                      {{ option }}
                    </span>
                  </div>
                </div>
              </ng-container>
              <ng-template #noMenus>
                <div class="h-full flex flex-col items-center justify-center py-8 text-center">
                  <mat-icon class="text-slate-200 mb-2">event_busy</mat-icon>
                  <p class="text-xs text-slate-400 font-medium">{{
                    AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.MENUS.NO_MENUS }}</p>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>

      <!-- USUARIS -->
      <div *ngSwitchCase="AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.TABS.USERS" class="space-y-6">
        <!-- Desktop Table -->
        <div class="hidden lg:block bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
          <table class="w-full text-left text-sm border-separate border-spacing-0">
            <thead>
              <tr class="bg-slate-50/50">
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TABLE.ID }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TABLE.NAME }}</th>
                <th class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100">{{
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TABLE.EMAIL }}</th>
                <th
                  class="px-6 py-4 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-100 text-right">
                  {{ AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TABLE.STATUS }}</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
              <tr *ngFor="let student of students" class="hover:bg-slate-50/50 transition-colors">
                <td class="px-6 py-4 font-mono text-xs text-slate-400">#{{ student.id }}</td>
                <td class="px-6 py-4">
                  <span class="font-bold text-slate-800">{{ student.name }} {{ student.lastName }}</span>
                </td>
                <td class="px-6 py-4 text-slate-600">{{ student.email }}</td>
                <td class="px-6 py-4 text-right">
                  <label class="inline-flex items-center gap-3 cursor-pointer group"
                    [class.opacity-50]="isProtectedUser(student)" [class.cursor-not-allowed]="isProtectedUser(student)">
                    <span class="text-xs font-bold transition-colors"
                      [ngClass]="student.status === 1 ? 'text-emerald-600' : 'text-slate-400'">
                      {{ student.status === 1 ? AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.ACTIVE :
                      AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.INACTIVE }}
                    </span>
                    <div class="relative">
                      <input type="checkbox" class="sr-only peer" [checked]="student.status === 1"
                        [disabled]="isProtectedUser(student)" (change)="toggleUserStatus(student)" />
                      <div
                        class="w-10 h-5 bg-slate-200 rounded-full peer peer-checked:bg-emerald-500 transition-all duration-300 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5">
                      </div>
                    </div>
                  </label>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Mobile Cards -->
        <div class="lg:hidden grid grid-cols-1 md:grid-cols-2 gap-4">
          <div *ngFor="let student of students"
            class="bg-white p-5 rounded-3xl shadow-sm border border-slate-200 space-y-4">
            <div class="flex justify-between items-start">
              <div class="flex flex-col">
                <span class="text-[10px] font-mono text-slate-400">#{{ student.id }}</span>
                <span class="font-bold text-slate-800 text-lg">{{ student.name }} {{ student.lastName }}</span>
                <span class="text-sm text-slate-500">{{ student.email }}</span>
              </div>
            </div>

            <div class="flex items-center justify-between pt-2 border-t border-slate-50">
              <span class="text-sm font-bold text-slate-400">{{
                AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.TABLE.STATUS }}</span>
              <label class="inline-flex items-center gap-3 cursor-pointer" [class.opacity-50]="isProtectedUser(student)"
                [class.cursor-not-allowed]="isProtectedUser(student)">
                <span class="text-xs font-bold"
                  [ngClass]="student.status === 1 ? 'text-emerald-600' : 'text-slate-400'">
                  {{ student.status === 1 ? AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.ACTIVE :
                  AppConstants.CONFIGURATION.LABELS.ADMIN_DASHBOARD.USERS.INACTIVE }}
                </span>
                <div class="relative">
                  <input type="checkbox" class="sr-only peer" [checked]="student.status === 1"
                    [disabled]="isProtectedUser(student)" (change)="toggleUserStatus(student)" />
                  <div
                    class="w-10 h-5 bg-slate-200 rounded-full peer peer-checked:bg-emerald-500 transition-all duration-300 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5">
                  </div>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>