<div class="h-screen flex items-start justify-center overflow-hidden p-4">
  <div class="w-full max-w-[500px] mt-2 rounded-2xl shadow-lg overflow-hidden bg-white ">
    <!-- Header -->
    <div class="bg-[#009ca6] p-6 flex items-center gap-4 text-white">
      <div class="w-12 h-12 flex justify-center items-center rounded-full bg-white/20"><mat-icon>person</mat-icon></div>
      <div class="flex flex-col">
        <p class="text-[18px] font-bold leading-[1.2]">
          <span>{{ student.name }}</span>
          <!-- <span class="px-[2px]"></span>
          <span>{{ middleName }}</span> -->
          <span class="px-[2px]"></span>
          <span>{{ student.last_name }}</span>
        </p>
      </div>
      <!-- <p class="user-role">Estudiante</p> User type label -->
    </div>

    <!-- Body -->
    <div class="px-6 py-4 flex flex-col gap-4">
      <!-- Datos -->
      <div>
        <p class="text-sm font-semibold text-[#333]">ğŸ“§ Email: <span class="font-normal">{{ student.email }}</span></p>
      </div>

      <!-- Allergies Section -->
      <div class="border-t border-[#e0e0e0] pt-3">
        <h3 class="text-md font-bold mb-2 text-[#009ca6]">AlÂ·lÃ¨rgies</h3>
        
        <div *ngIf="successMessage" class="bg-green-100 text-green-700 p-2 rounded mb-2 text-sm">
            {{ successMessage }}
        </div>
        <div *ngIf="errorMessage" class="bg-red-100 text-red-700 p-2 rounded mb-2 text-sm">
            {{ errorMessage }}
        </div>

        <form [formGroup]="profileForm" (ngSubmit)="saveAllergies()">
            <div class="mb-3">
                <label class="block text-sm font-semibold text-[#333] mb-1">Comunes:</label>
                <div class="grid grid-cols-2 gap-2">
                    <div *ngFor="let allergy of allergies" class="flex items-center">
                        <input type="checkbox" [id]="'allergy-' + allergy.id" 
                               [checked]="selectedAllergyIds.has(allergy.id)" 
                               (change)="toggleAllergy(allergy.id)" 
                               class="mr-2 h-4 w-4 text-[#009ca6] focus:ring-[#009ca6] border-gray-300 rounded">
                        <label [for]="'allergy-' + allergy.id" class="text-sm text-gray-700">{{ allergy.name }}</label>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="block text-sm font-semibold text-[#333] mb-1">Altres (separades per comes):</label>
                <input type="text" formControlName="custom_allergies" 
                       class="w-full p-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-[#009ca6]" 
                       placeholder="Ex: Maduixes, Kiwi">
            </div>

            <button type="submit" 
                    class="w-full bg-[#009ca6] text-white font-bold py-2 px-4 rounded hover:bg-[#00858e] transition text-sm">
                Guardar AlÂ·lÃ¨rgies
            </button>
        </form>
      </div>

      <!-- Ajustes -->
      <div class="border-t border-[#e0e0e0] pt-3">
        <p (click)="forgotPassword()"
          class="flex justify-between items-center text-sm text-[#333] py-2 cursor-pointer hover:text-[#009ca6] transition">
          <span>âš™ï¸ Cambiar contrasenya</span>
          <span class="text-[#bbb] text-[18px]">â€º</span>
        </p>
        <p (click)="logout()"
          class="flex justify-between items-center text-sm text-red-600 font-semibold py-2 cursor-pointer hover:text-red-700 transition">
          <span>ğŸ”´ Tancar sessiÃ³</span>
          <span class="text-[#bbb] text-[18px]">â€º</span>
        </p>

      </div>
    </div>
  </div>
</div>