<div class="user-card-container flex justify-center p-4">
  <div
    class="w-full max-w-md rounded-xl border border-gray-200 bg-white"
  >
    <!-- Header -->
    <div class="flex items-center gap-3 px-5 py-4 border-b border-gray-200">
      <div
        class="flex h-10 w-10 items-center justify-center rounded-full bg-[#009ca6]/10 text-[#009ca6]"
      >
        <mat-icon>person</mat-icon>
      </div>

      <div>
        <p class="text-base font-semibold text-gray-800 leading-tight">
          {{ student.name }} {{ student.last_name }}
        </p>
        <p class="text-xs text-gray-500">
          {{ student.email }}
        </p>
      </div>
    </div>

    <!-- Body -->
    <div class="px-5 py-4 space-y-5">
      <!-- Allergies -->
      <div class="space-y-3">
        <h3 class="text-sm font-semibold text-[#009ca6]">
          Al·lèrgies
        </h3>

        <form
          [formGroup]="profileForm"
          (ngSubmit)="saveAllergies()"
          class="space-y-3"
        >
          <!-- Common allergies -->
          <mat-form-field appearance="outline" class="w-full">
            <mat-select
              placeholder="Comunes"
              formControlName="allergies"
              multiple
              panelClass="user-card-panel"
            >
              <mat-option
                *ngFor="let allergy of allergies"
                [value]="allergy.id"
              >
                {{ allergy.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Custom allergies -->
          <div>
            <label class="block text-xs font-medium text-gray-600 mb-1">
              Altres (separades per comes)
            </label>

            <input
              type="text"
              formControlName="custom_allergies"
              placeholder="Ex: Maduixes, Kiwi"
              class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm
                     focus:outline-none focus:ring-1 focus:ring-[#009ca6]
                     focus:border-[#009ca6]"
            />
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full rounded-md bg-[#009ca6] py-2 text-sm font-semibold
                   text-white hover:bg-[#00858e] transition"
          >
            Guardar al·lèrgies
          </button>
        </form>
      </div>

      <!-- Actions -->
      <div class="border-t border-gray-200 pt-3 space-y-1">
        <button
          type="button"
          (click)="forgotPassword()"
          class="w-full flex items-center justify-between text-sm text-gray-700
                 hover:text-[#009ca6] py-2 transition"
        >
          <span>Canviar contrasenya</span>
          <span class="text-gray-400">›</span>
        </button>

        <button
          type="button"
          (click)="logout()"
          class="w-full flex items-center justify-between text-sm font-semibold
                 text-red-600 hover:text-red-700 py-2 transition"
        >
          <span>Tancar sessió</span>
          <span class="text-gray-400">›</span>
        </button>
      </div>
    </div>
  </div>
</div>
